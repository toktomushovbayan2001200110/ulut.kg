!function(e){const t=()=>{e(document.body).on("arrowpress-metabox-tab",(function(){e("ul.arrowpress-metabox-tab__title").show(),e("ul.arrowpress-metabox-tab__title a").on("click",(function(t){t.preventDefault();const a=e(this).closest("div.arrowpress-metabox-tab");e("ul.arrowpress-metabox-tab__title li",a).removeClass("active"),e(this).parent().addClass("active"),e("div.arrowpress-metabox-tab__content--inner",a).hide(),e('div.arrowpress-metabox-tab__content--inner[data-content="'+e(this).data("content")+'"]',a).show()})),e("div.arrowpress-metabox-tab").each((function(){e(this).find("ul.arrowpress-metabox-tab__title li").eq(0).find("a").trigger("click")}))})).trigger("arrowpress-metabox-tab")},a=()=>{e(".arrowpress-meta-box__file").each(((t,a)=>{let o;const i=e(a).find(".arrowpress-meta-box__file_input"),r=e(a).find(".arrowpress-meta-box__file_list"),n=e(a).find(".btn-upload"),s=!!e(a).data("multil"),l=!!e(a).data("img_url");e(n).on("click",(e=>{e.preventDefault(),o||(o=wp.media({states:[new wp.media.controller.Library({filterable:"all",multiple:s})]}),o.on("select",(function(){const e=o.state().get("selection");let t=i.val();e.forEach((function(e){if((e=e.toJSON()).id)if(s?t=t?t+","+e.id:e.id:(t=l?e.url:e.id,r.empty()),"image"===e.type){const t=e.sizes&&e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;r.append('<li class="arrowpress-meta-box__file_list-item image" data-attachment_id="'+e.id+'"><img src="'+t+'" /><ul class="actions"><li><a href="#" class="delete"></a></li></ul></li>')}else r.append('<li class="arrowpress-meta-box__file_list-item image" data-attachment_id="'+e.id+'"><img class="is_file" src="'+e.icon+'" /><span>'+e.filename+'</span><ul class="actions"><li><a href="#" class="delete"></a></li></ul></li>')})),c(),i.val(t)}))),o.open()})),s&&r.sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"arrowpress-metabox-sortable-placeholder",start(e,t){t.item.css("background-color","#f6f6f6")},stop(e,t){t.item.removeAttr("style")},update(){let t="";r.find("li.image").css("cursor","default").each((function(){const a=e(this).attr("data-attachment_id");t=t+a+","})),c(),i.val(t)}});const c=()=>{e(r).find("li.image").each(((t,a)=>{e(a).find("a.delete").on("click",(function(){if(e(a).remove(),s){let t="";e(r).find("li.image").css("cursor","default").each((function(){const a=e(this).attr("data-attachment_id");t=t+a+","})),i.val(t)}else i.val("");return!1}))}))};c()}))};e(document).ready((function(){function o(t){e(".metabox-tabs-container ul li").removeClass("active"),e(t).addClass("active");var a=e(t).find("a").attr("href");e(".metabox-content > li").hide(),e(a).show()}t(),a(),e.fn.select2&&e(".arrowpress-select-2 select").select2(),e(".arrowpress-meta-box__color--input").wpColorPicker(),[...document.querySelectorAll(".arrowpress-meta-box")].map((e=>{[...e.querySelectorAll(".form-field")].map((t=>{if(t.hasAttribute("data-hide")&&t.dataset.hide){let a=JSON.parse(t.dataset.hide);[...e.querySelectorAll(`input[id^="${a[0]}"]`)].map((e=>{let o=e.getAttribute("type");if(e){switch(o){case"checkbox":"!="==a[1]&&a[2]!==Boolean(e.checked)||"="==a[1]&&a[2]==Boolean(e.checked)?t.style.display="none":t.classList.contains("arrowpress-meta-box-group")?t.style.display="block":t.style.display="flex";break;case"radio":e.checked&&("!="==a[1]&&a[2]!==e.value||"="==a[1]&&a[2]==e.value?t.style.display="none":t.classList.contains("arrowpress-meta-box-group")?t.style.display="block":t.style.display="flex")}e.addEventListener("change",(e=>{let i=e.target;switch(o){case"checkbox":"!="==a[1]&&a[2]!==Boolean(i.checked)||"="==a[1]&&a[2]==Boolean(i.checked)?t.style.display="none":t.classList.contains("arrowpress-meta-box-group")?t.style.display="block":t.style.display="flex";break;case"select":case"radio":"!="==a[1]&&a[2]!==i.value||"="==a[1]&&a[2]==i.value?t.style.display="none":t.classList.contains("arrowpress-meta-box-group")?t.style.display="block":t.style.display="flex"}}))}}))}}))})),e(".metabox-tabs li").on("click",(function(){return o(this),!1})),o(e(".metabox-tabs li:first-child"))}))}(jQuery),jQuery((function(e){"use strict";e("#parent_id");var t={template:["#page_template",".editor-page-attributes__template .components-select-control__input"],post_format:['input[name="post_format"]',".editor-post-format .components-select-control__input"],parent:["#parent_id"]},a={},o=e(document),i=!1;function r(){_.forEach(t,(function(t,o){var i=_.find(t,(function(t){return e(t).length}));a[o]=e(i)}))}var n={template:function(e){var t=i?a.template.val():MBShowHideData.template,o=-1!==e.indexOf(t);return console.log("Check by template:",o),o},post_format:function(e){e=e.map((function(e){return e.toLowerCase()}));var t=MBShowHideData.post_format;i&&(t=a.post_format.is("select")?a.post_format.val():a.post_format.filter(":checked").val()),t&&0!=t||(t="standard");var o=-1!=e.indexOf(t);return console.log("Check by post format:",o),o},taxonomy:function(t,a){var o=[];e("#"+t+"checklist :checked").each((function(){var t=e(this),a=e.trim(t.parent().text());o.push(parseInt(t.val())),o.push(a)}));for(var i=0,r=o.length;i<r;i++)if(-1!=a.indexOf(o[i]))return!0;return!1},input_value:function(t,a){for(var o in a=a||"OR",t){var i=e(o),r=e.trim(i.val()),n=null;if(i.is(":checkbox")&&(n=i.is(":checked")===!!t[o]),i.is(":radio")&&(r=e.trim(i.filter(":checked").val())),"OR"==a){if(r==t[o]&&null===n||!0===n)return!0}else if(r!=t[o]&&null===n||!1===n)return!1}return"OR"!=a},is_child:function(){var e=i?a.parent.val():MBShowHideData.parent,t=!!parseInt(e);return console.log("Check by is child:",t),t}},s={template:function(e){o.on("change",t.template.join(","),e)},post_format:function(e){o.on("change",t.post_format.join(","),e)},taxonomy:function(t,a){e("#"+t+"checklist-pop").on("click","input",(function(){var t=e(this),a=t.val(),o=t.attr("id");if(a){var i=o.replace("in-popular-","").replace("-"+a,"");e("#in-"+i+"-"+a).trigger("change")}})),e("#"+t+"checklist").on("change","input",a)},input_value:function(t,a){e(a).on("change",t)},is_child:function(e){o.on("change",t.parent.join(","),e)}};function l(t,a,o){var s=function(t){var a,o=e.extend({},t),s=o.hasOwnProperty("relation")?o.relation.toUpperCase():"OR";o.hasOwnProperty("relation")&&delete o.relation;r();for(var l,c,d=["template","post_format","input_value","is_child"],p=0,f=d.length;p<f;p++)if(l=d[p],o.hasOwnProperty(l)){if(c=n[l](o[l],s),"OR"==s){if(a=void 0===a?c:a||c)break}else if(!(a=(void 0===a||a)&&c))break;delete o[l]}if(o.length)for(var u in o)if(o.hasOwnProperty(u))if(c=n.taxonomy(u,o[u]),"OR"==s){if(a=void 0===a?c:a||c)break}else if(!(a=(void 0===a||a)&&c))break;return i=!0,a}(a);"show"==t?s?o.show():o.hide():s?o.hide():o.show()}function c(t,a,o){var i=e.extend({},a);i.hasOwnProperty("relation")&&delete i.relation;for(var r,n=["template","post_format","input_value","is_child"],c=0,d=n.length;c<d;c++)if(r=n[c],i.hasOwnProperty(r))if("input_value"==r){for(var p in i[r])s[r]((function(){l(t,a,o)}),p);delete i[r]}else s[r]((function(){l(t,a,o)})),delete i[r];if(!i.length)for(var f in i)i.hasOwnProperty(f)&&s.taxonomy(f,(function(){l(t,a,o)}))}setTimeout((function(){window.requestAnimationFrame((function(){r(),e(".arrowpress-meta-box").each((function(){var t=e(this),a=t.closest(".postbox");t.data("show")&&l("show",t.data("show"),a),t.data("hide")&&l("hide",t.data("hide"),a)})),e(".arrowpress-meta-box").each((function(){var t=e(this),a=t.closest(".postbox");t.data("show")&&c("show",t.data("show"),a),t.data("hide")&&c("hide",t.data("hide"),a)}))}))}),1e3)}));
